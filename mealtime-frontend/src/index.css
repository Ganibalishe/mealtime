@tailwind base;
@tailwind components;
@tailwind utilities;

/* Базовые стили */
@layer base {
  body {
    background-color: #FDFDFD;
    color: #1f1d1a;
    /* Отступ снизу для системных кнопок Android/iOS */
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Для мобильных устройств добавляем дополнительный отступ */
  @supports (padding: max(0px)) {
    body {
      padding-bottom: max(env(safe-area-inset-bottom, 0px), 16px);
    }
  }
}

/* Кастомные компоненты */
@layer components {
  /* Кнопки */
  .btn-primary {
    @apply bg-primary-500 hover:bg-primary-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .btn-accent {
    @apply bg-accent-500 hover:bg-accent-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2;
  }

  .btn-secondary {
    @apply bg-secondary-400 hover:bg-secondary-500 text-neutral-900 font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-secondary-400 focus:ring-offset-2;
  }

  .btn-outline {
    @apply bg-transparent border border-neutral-300 hover:border-neutral-400 text-neutral-700 hover:text-neutral-900 font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }

  /* Поля ввода */
  .input-field {
    @apply w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-transparent text-base bg-neutral-50;
  }

  /* Карточки */
  .card {
    @apply bg-white rounded-lg shadow-sm border border-neutral-200 p-4 sm:p-6;
  }

  .card-elevated {
    @apply bg-white rounded-lg shadow-md border border-neutral-200 p-4 sm:p-6;
  }

  /* Бейджи */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-800;
  }

  .badge-accent {
    @apply bg-accent-100 text-accent-800;
  }

  .badge-secondary {
    @apply bg-secondary-100 text-secondary-800;
  }
}

/* Утилиты */
@layer utilities {
  /* Улучшаем скролл для модальных окон */
  .modal-scroll-container {
    scrollbar-width: thin;
    scrollbar-color: rgb(156 163 175) transparent;
  }

  .modal-scroll-container::-webkit-scrollbar {
    width: 6px;
  }

  .modal-scroll-container::-webkit-scrollbar-track {
    background: transparent;
  }

  .modal-scroll-container::-webkit-scrollbar-thumb {
    background: rgb(156 163 175);
    border-radius: 3px;
  }

  .modal-scroll-container::-webkit-scrollbar-thumb:hover {
    background: rgb(107 114 128);
  }

  .mobile-touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }

  .bg-page {
    background-color: #FDFDFD;
  }

  .bg-panel {
    background-color: #F8F5F2;
  }

  .text-primary {
    color: #1f1d1a;
  }

  .text-secondary {
    color: #6b665e;
  }

/* Анимации */
@layer utilities {
  .fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }

  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95) translateY(10px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
}

}

/* Кастомные стили для календаря */
.calendar-day-current {
  @apply bg-primary-50 border-2 border-primary-200;
}

.calendar-day-selected {
  @apply bg-accent-50 border-2 border-accent-200;
}

.meal-card {
  @apply bg-white rounded-lg border border-neutral-200 p-3 hover:shadow-md transition-all duration-200;
}

.meal-card-empty {
  @apply bg-neutral-50 border-2 border-dashed border-neutral-300 text-neutral-500 rounded-lg p-4 text-center hover:bg-neutral-100 transition-colors;
}

/* Адаптивные улучшения */
@media (max-width: 768px) {
  .mobile-touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Адаптивные тексты */
@media (max-width: 640px) {
  .text-mobile-sm {
    font-size: 0.875rem;
  }

  .text-mobile-base {
    font-size: 1rem;
  }
}

/* Улучшаем отображение на очень маленьких экранах */
@media (max-width: 360px) {
  .grid-cols-1 {
    grid-template-columns: 1fr;
  }

  .p-mobile-2 {
    padding: 0.5rem;
  }
}

/* Safe Area для мобильных устройств (Android/iOS системные кнопки) */
@layer utilities {
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left, 0px);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right, 0px);
  }

  /* Для основного контента - отступ снизу */
  .safe-content {
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 16px);
  }

  /* Для футера - дополнительный отступ */
  .safe-footer {
    margin-bottom: env(safe-area-inset-bottom, 0px);
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 8px);
  }
}